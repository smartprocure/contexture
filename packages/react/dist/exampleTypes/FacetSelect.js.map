{"version":3,"sources":["../../src/exampleTypes/FacetSelect.js"],"names":["getOptions","node","_","map","name","count","F","autoLabelOption","get","FacetSelect","tree","hide","counts","singleValue","display","x","formatCount","displayBlank","RadioList","theme","MenuList","props","context","cardinality","boxShadow","fontSize","padding","marginBottom","opacity","children","mode","mutate","path","autoLabelOptions","val","optionsFilter","label","values"],"mappings":"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","sourcesContent":["import React from 'react'\nimport F from 'futil'\nimport _ from 'lodash/fp'\nimport Async from 'react-select/lib/Async'\nimport { components } from 'react-select'\nimport { Flex } from '../greyVest'\nimport { contexturify } from '../utils/hoc'\nimport { Cardinality } from '../utils/facet'\n\nlet getOptions = node =>\n  _.map(\n    ({ name, count }) => ({ ...F.autoLabelOption(name), count }),\n    _.get('context.options', node)\n  )\n\nlet FacetSelect = ({\n  tree,\n  node,\n  hide = {\n    counts: false, // Hide the facet counts so only the labels are displayed\n  },\n  singleValue = false,\n  display = x => x,\n  formatCount = x => x,\n  displayBlank = () => <i>Not Specified</i>,\n  theme: { RadioList },\n}) => {\n  let MenuList = props => (\n    <components.MenuList {...props}>\n      {!!node.context.cardinality && (\n        <div\n          style={{\n            boxShadow: '0 2px 2px -2px #CCC',\n            fontSize: '0.9em',\n            padding: '0 10px 1px',\n            marginBottom: 4,\n            opacity: 0.8,\n          }}\n        >\n          <Cardinality {...{ node, tree }} />\n        </div>\n      )}\n      {props.children}\n    </components.MenuList>\n  )\n\n  return (\n    <div className=\"contexture-facet-select\">\n      <RadioList\n        value={node.mode || 'include'}\n        onChange={mode => tree.mutate(node.path, { mode })}\n        options={F.autoLabelOptions(['include', 'exclude'])}\n      />\n      <Async\n        placeholder=\"Search...\"\n        isMulti={!singleValue}\n        cacheOptions\n        defaultOptions={getOptions(node)}\n        loadOptions={async val => {\n          await tree.mutate(node.path, { optionsFilter: val })\n          return getOptions(node)\n        }}\n        formatOptionLabel={({ label, count }, { context }) => (\n          <Flex justifyContent=\"space-between\">\n            <span>{display(label) || displayBlank()}</span>\n            {context === 'menu' && !hide.counts && (\n              <span>{formatCount(count)}</span>\n            )}\n          </Flex>\n        )}\n        onChange={x => tree.mutate(node.path, { values: _.map('value', x) })}\n        components={{ MenuList }}\n      />\n    </div>\n  )\n}\n\nexport default contexturify(FacetSelect)\n"],"file":"FacetSelect.js"}