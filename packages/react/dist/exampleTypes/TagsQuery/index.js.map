{"version":3,"sources":["../../../src/exampleTypes/TagsQuery/index.js"],"names":["innerHeight","TagsQuery","tree","node","style","actionWrapper","onAddTag","_","noop","popoverPosition","theme","Icon","TagsInput","Tag","Popover","props","TagWithPopover","value","map","tagValueField","tags","tag","mutate","path","reject","triggerUpdate","flex","border","width","close"],"mappings":"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","sourcesContent":["import React from 'react'\nimport _ from 'lodash/fp'\nimport { Grid, GridItem } from '../../greyVest'\nimport { contexturifyWithoutLoader } from '../../utils/hoc'\nimport { getTagStyle, tagValueField } from './utils'\nimport TagActionsMenu from './TagActionsMenu'\nimport ActionsMenu from './ActionsMenu'\n\nexport let innerHeight = 40\n\nlet TagsQuery = ({\n  tree,\n  node,\n  style,\n  actionWrapper,\n  onAddTag = _.noop,\n  popoverPosition = 'bottom right',\n  theme: { Icon, TagsInput, Tag, Popover },\n  ...props\n}) => {\n  let TagWithPopover = props => (\n    <Popover\n      position=\"right top\"\n      closeOnPopoverClick={false}\n      trigger={<Tag {...props} />}\n    >\n      <TagActionsMenu tag={props.value} {...{ node, tree }} />\n    </Popover>\n  )\n\n  return (\n    <Grid\n      className=\"tags-query\"\n      rows={`${innerHeight}px minmax(0, auto)`}\n      columns=\"1fr auto\"\n      style={style}\n    >\n      <GridItem height={2} place=\"center stretch\">\n        <TagsInput\n          splitCommas\n          tags={_.map(tagValueField, node.tags)}\n          addTag={tag => {\n            tree.mutate(node.path, {\n              tags: [...node.tags, { [tagValueField]: tag, distance: 3 }],\n            })\n            onAddTag(tag)\n          }}\n          removeTag={tag => {\n            tree.mutate(node.path, {\n              tags: _.reject({ [tagValueField]: tag }, node.tags),\n            })\n          }}\n          tagStyle={getTagStyle(node, tagValueField)}\n          submit={tree.triggerUpdate}\n          Tag={TagWithPopover}\n          style={{ flex: 1, border: 0 }}\n          {...props}\n        />\n      </GridItem>\n      <GridItem place=\"center\">\n        <Popover\n          style={{ width: 'auto' }}\n          position={popoverPosition}\n          closeOnPopoverClick={false}\n          trigger={\n            <div>\n              <Icon icon=\"TableColumnMenu\" />\n            </div>\n          }\n        >\n          {close => (\n            <ActionsMenu\n              {...{\n                node,\n                tree,\n                close,\n                actionWrapper,\n              }}\n            />\n          )}\n        </Popover>\n      </GridItem>\n    </Grid>\n  )\n}\n\nexport default contexturifyWithoutLoader(TagsQuery)\n"],"file":"index.js"}